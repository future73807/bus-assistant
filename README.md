# 🚌 老年人公交出行助手

一个专为老年人设计的公交查询应用，支持语音输入、路线规划、实时公交查询和语音报站功能。

## 功能特点

- 🎤 **语音输入** - 点击麦克风，直接说出起点终点，自动识别
- 🗺️ **真实数据** - 接入高德地图API获取真实公交数据
- 🚌 **实时公交** - 显示公交车还有几分钟、几站到达
- 🔊 **语音报站** - TTS语音播报详细乘车指引（坐哪路车、在哪上车、在哪下车）
- 👆 **点击播报** - 点击任意路线卡片，即可播放该路线的语音指引
- 📱 **大字号界面** - 专为老年人设计，清晰易读
- 🔄 **演示模式** - 无需API Key也可体验基础功能

## 使用说明

1. **输入起点** - 点击下方麦克风按钮，说出出发地点（如"天安门"、"我的位置"）。
2. **输入终点** - 再次点击麦克风，说出目的地。
3. **查看路线** - 系统会自动规划并显示2条最优公交路线。
   - **默认播报**：路线规划完成后，系统会自动播报第一条推荐路线。
   - **手动播报**：点击任意路线卡片，系统会播报该路线的详细信息。
4. **实时信息** - 卡片内会显示公交车的实时位置、预计到站时间和距离站数。
   - **选中状态**：卡片变蓝，显示白色文字。
   - **未选中状态**：卡片为白色，显示蓝色文字，确保清晰可见。
5. **状态提示** - 当正在播报时，卡片右上角会出现"播报中"的动态提示。

## 安装步骤

### 1. 安装依赖

```bash
npm install
```

### 2. 启动项目

```bash
npm run dev
```

### 3. 访问应用

打开浏览器访问: http://localhost:3000

## 配置说明

### 1. 地图服务 (高德地图)
本项目依赖高德地图API获取公交数据。

1. 访问 [高德开放平台](https://lbs.amap.com/)
2. 注册并登录账号
3. 创建应用，选择"Web服务"
4. 获取API Key
5. 在应用首页点击右上角设置按钮，输入Key并保存

> **注意**：如果没有配置Key，系统将进入**演示模式**，使用模拟数据进行展示。

### 2. 语音合成服务 (可选)
本项目支持 **讯飞语音合成 (TTS)** 提供更自然流畅的语音播报体验。如果不配置，将自动降级使用 **浏览器原生语音 (免费)**。

**配置讯飞语音 (推荐):**
1. 访问 [讯飞开放平台](https://www.xfyun.cn/)
2. 注册并登录账号
3. 创建应用，选择"在线语音合成（流式版）"服务
4. 获取 `APPID`, `APISecret`, `APIKey`
5. 在应用首页点击右上角设置按钮，填入对应信息并保存

**使用免费语音:**
- 如果不配置讯飞Key，系统会自动使用浏览器自带的语音合成引擎 (Web Speech API)。
- 优点：完全免费，无需配置，无调用限制。
- 缺点：音色较为机械，不同设备/浏览器效果差异较大。

## 技术栈

- **框架**: Next.js 15 (App Router)
- **语言**: TypeScript
- **样式**: Tailwind CSS
- **动画**: Framer Motion
- **地图服务**: 高德地图 API
- **语音服务**: 讯飞语音合成 (优先支持) / 浏览器原生 Speech API (兜底)

## 注意事项

1. 语音功能需要浏览器授权麦克风权限。
2. 建议使用Chrome、Edge等现代浏览器以获得最佳体验。
3. 生产环境部署时，请注意API Key的安全保护。

## License

MIT
